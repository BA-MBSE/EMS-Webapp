<!doctype html>
<html lang="en" ng-app="stompApp">
<head>

  <meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1" />
  <meta charset="utf-8">

  <title>test</title>


</head>

<body>

<div class= "row" ng-controller="StompController">

      <div class="span8 offset1">
          <h1>Messages</h1>
          <p ng-repeat="message in messages">{{message}}</p>
      </div>
      <h3>{{master.documentation}}</h3>
</div>


<div growl></div>

  <!-- bower:js -->
  <!-- endbower -->
  <script src="lib/modernizr/modernizr.custom.61017.min.js"></script>


  <script src="bower_components/jquery/jquery.js"></script>
  <script src="bower_components/angular/angular.js"></script>
  <!-- GoJS and TinyMCE-->
  <script src="lib/gojs/go.js"></script>
  <script src="//tinymce.cachefly.net/4.1/tinymce.min.js"></script>
  <script src="lib/jquery.isonscreen.js"></script>


  <!-- MMS Services and Directives-->
  <script src="//cdn.jsdelivr.net/sockjs/1.0.0/sockjs.min.js"></script>
  <script src="/angular-stomp.js"></script>
  <!-- MMS Services and Directives-->
  <script src="mms.js"></script>
  <script src="mms.directives.tpls.js"></script>
  <script src="mms.directives.js"></script>

  <!-- MMS Application-->
  <script src="js/mms/app.js"></script>
  <script src="js/mms/controllers.js"></script>
  <script>
  angular.module('stompApp', ['AngularStomp'])
  .controller('StompController', ['$scope','ngstomp','$rootScope',function($scope, ngstomp, $rootScope) {
    $scope.master = {'documentation':'Hello World'};
    $scope.messages = [];
    $scope.client = ngstomp('wss://ems-test-origin:61614/stomp+ssl');
    $scope.client.connect("guest", "guest", function(){
      $scope.client.subscribe("/topic/master", function(message) {
        $scope.messages.push(message.body);
      });
    } ,function(){}, '/');
  }]);


  // function StompController($scope, $routeParams, ngstomp) {
  //   $scope.messages = [];
  //   $scope.client = ngstomp();
  //   $scope.client.connect("guest", "guest", function(){
  //       $scope.client.subscribe("/topic/test", function(message) {
  //           $scope.messages.push(message.body);
  //       });
  //   }, function(){}, '/');

  </script>


</body>
</html>
