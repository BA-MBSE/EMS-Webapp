<h2 class="right-pane-title">Element History <span ng-show="gettingHistory"><i class="fa fa-spin fa-spinner"></i></span></h2>

<div style="position:relative;">
    <div class="diff-dotted-connection" ng-show="ModelData.ShowDiffPrototype"></div>
    <div class="btn-group ve-light-dropdown" uib-dropdown keyboard-nav is-open="compareCommit.isopen" auto-close="outsideClick">
        <button class="dropdown-toggle" type="button" uib-dropdown-toggle>
            <span><b>{{compareCommit.commitSelected._creator}} - {{compareCommit.commitSelected._created | date:'M/d/yy h:mm a'}}</b></span>
            <i style="float:right;" class="fa fa-caret-down" aria-hidden="true"></i>
        </button>
        <ul class="dropdown-menu menu-with-input" uib-dropdown-menu role="menu">
            <li class="dropdown-input">
                <input class="ve-plain-input" type="text" placeholder="Filter history" ng-model="historyFilter">
            </li>
            <li ng-click="commitClicked(version)" ng-model="compareCommit.commitSelected" ng-repeat="version in compareCommit.compareHistory | filter:historyFilter"
                ng-class="{'checked-list-item': version === compareCommit.commitSelected}">
                <a>{{ version._creator }} - {{version._created | date:'M/d/yy h:mm a'}}</a>
            </li>
        </ul>
    </div>

    <input type="checkbox" style="margin:0 4px;" ng-model="ModelData.ShowDiffPrototype" ng-disabled="disableCompare">Compare versions

    <div ng-show="ModelData.ShowDiffPrototype">
        <div class="btn-group ve-light-dropdown" uib-dropdown keyboard-nav is-open="baseCommit.isopen" auto-close="outsideClick" style="margin-bottom:2px;">
            <button class="dropdown-toggle" type="button" uib-dropdown-toggle>
                {{baseCommit.refSelected.type}}: <b>{{baseCommit.refSelected.name}}</b>
                <i style="float:right;" class="fa fa-caret-down" aria-hidden="true"></i>
            </button>
            <ul class="dropdown-menu menu-with-input" uib-dropdown-menu role="menu">
                <li class="dropdown-input">
                    <input class="ve-plain-input" type="text" placeholder="Filter refs" ng-model="refFilter">
                </li>
                <li ng-click="getElementHistoryByRef(ref)" ng-model="baseCommit.refSelected" ng-repeat="ref in refList | filter:refFilter"
                    ng-class="{'checked-list-item': ref.id === baseCommit.refSelected.id}">
                    <a>{{ ref.type }} -- {{ref.name}}</a>
                </li>
            </ul>
        </div>
        <div style="width:calc(100% - 90px);display:inline-block;margin-top:2px;" class="btn-group ve-light-dropdown" uib-dropdown keyboard-nav auto-close="outsideClick">
            <button class="dropdown-toggle" type="button" uib-dropdown-toggle>
                <span>Commit: <b>{{baseCommit.commitSelected._creator}} - {{baseCommit.commitSelected._created | date:'M/d/yy h:mm a'}}</b></span>
                <i style="float:right;" class="fa fa-caret-down" aria-hidden="true"></i>
            </button>
            <ul class="dropdown-menu menu-with-input" uib-dropdown-menu role="menu">
                <li class="dropdown-input">
                    <input class="ve-plain-input" ng-model="compareHistoryFilter" type="text" placeholder="Filter history">
                </li>
                <li ng-click="baseCommitClicked(version)" ng-model="baseCommit.commitSelected" ng-repeat="version in baseCommit.baseHistory | filter:compareHistoryFilter"
                    ng-class="{'checked-list-item': version === baseCommit.commitSelected}" ng-disabled="$index === 0" >
                    <a>{{ version._creator }} - {{version._created | date:'M/d/yy h:mm a'}}</a>
                </li>
            </ul>
        </div>
        <button style="float:right;margin:2px 0 8px;" class="btn btn-primary">Revert</button>
    </div>
</div>

<div ng-show="ModelData.ShowDiffPrototype">
    <hr style="margin-left:-20px;margin-right:-20px;">
    <div ng-if="ModelData.ShowDiffPrototype">
    <!-- <style>del{color: black;background: #ffbbbb;} ins{color: black;background: #bbffbb;} .match,.textdiff span {color: gray;}</style>
    <div class="textdiff" semantic-diff left-obj="origElem" right-obj="compElem" ></div> -->
        
        <!-- mmsEidOne: '@mmsElementOneId',
        mmsEidTwo: '@mmsElementTwoId',
        mmsAttr: '@',
        mmsProjectOneId: '@',
        mmsProjectTwoId: '@',
        mmsRefOneId: '@',
        mmsRefTwoId: '@',
        mmsCommitOneId: '@',
        mmsCommitTwoId: '@' -->
        <h1 class="prop element-title ng-binding">
            <mms-diff-attr mms-element-one-id="{{mmsElementId}}" mms-attr="name" mms-project-one-id="{{mmsProjectId}}" mms-ref-one-id="{{mmsRefId}}" mms-commit-one-id="{{baseCommit.commitSelected.id}}" mms-commit-two-id="{{historyVer}}"></mms-diff-attr>
        </h1>

        <h2 class="prop-title">Last Modification</h2>
        <h3 class="prop ng-binding"><del>6/13/17 11:40 AM by eherrick
        </del><br><ins>8/23/17 2:12 PM by igomes
        </ins></h3>
        
        <h2 class="prop-title spec-view-doc-heading">Documentation <a ng-click="showDocHTML = !showDocHTML"><i class="fa fa-code"></i></a></h2>
        <mms-diff-attr mms-element-one-id="{{mmsElementId}}" mms-attr="doc" mms-project-one-id="{{mmsProjectId}}" mms-ref-one-id="{{mmsRefId}}" mms-commit-one-id="{{baseCommit.commitSelected.id}}" mms-commit-two-id="{{historyVer}}"></mms-diff-attr>
        <p ng-show="!showDocHTML" class="doc-text ng-binding">Blocks may also specify 
        operations or other features that describe the behavior of a system. 
        Except for operations, this clause deals strictly with the definition of
         properties to describe the state of a system at any given point in 
        time, including relations between elements that define its structure. 
        Clause 9, “Ports and Flows” specifies specific forms of interactions 
        between blocks, and the Behavioral Constructs including activities, 
        interactions, and state machines can be applied to blocks to specify 
        their behavior. Clause <del>15, “Allocations”</del><ins class="ins-view-link">[cf:Allocations.vlink]</ins> describes ways to allocate behavior to parts and blocks. </p>
        <h2 class="prop-title">Branch/Tag</h2>
        <h3 class="prop ng-binding">master</h3>
        <h2 class="prop-title">Formatted Modified Time</h2>
        <h3 class="prop ng-binding">2017-07-10T20:15:04.975-0700</h3>
        <h2 class="prop-title">Commit</h2>
        <h3 class="prop ng-binding">7dd4d0de-e88a-429e-a0c5-7532dc28e0ad</h3>
    </div>
</div>
<!-- Spec window -->
<div ng-hide="ModelData.ShowDiffPrototype">
    <mms-spec mms-element-id="{{mmsElementId}}" mms-project-id="{{mmsProjectId}}" mms-ref-id="{{mmsRefId}}" mms-commit-id="{{historyVer}}" no-edit="true"></mms-spec>
</div>


